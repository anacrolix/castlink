<html>
<head>
  <title>Cast Link</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-7566778-13', 'auto');
    ga('send', 'pageview');
  </script>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="script.js"></script>
  <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js"></script>
  <style>
    .controls > *, .control {
      display: none;
    }
    .load {
      display: initial;
    }
    .current-url {
      overflow-wrap: break-word;
    }
    .duration {
      float: right;
    }
    .hidden {
      display: none;
    }
    .url {
      word-break: break-all;
    }
    .navbar-nav .nav-item+.nav-item {
      margin-left: 0;
    }
  </style>
</head>
<body>
  <div class="container">

    <nav class="navbar navbar-dark bg-inverse">
      <a class="navbar-brand" href="/">Link Caster</a>
      <ul class="navbar-nav nav nav-pills" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" data-toggle="pill" href="#user" role="tab">User</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="pill" href="#developer" role="tab">Developer</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="pill" href="#about" role="tab">About</a>
        </li>
      </ul>
    </nav>

    <div class="tab-content">
      <div class="tab-pane active" id="user" role="tabpanel">
        <p></p>
        <div id="init-error-alert" class="alert alert-danger hidden" role="alert">
          <strong id="init-error-info"></strong> You may need to use Chrome, or an Android device.
        </div>
        <div class="row">
          <div class="col-sm-6">
            <div id="receivers" class="hidden card card-block">
              <h4>Receivers</h4>
              <div id="available" class="alert alert-success hidden" role="alert">
                <strong>Available</strong>.
              </div>
              <div id="unavailable" class="alert alert-danger hidden" role="alert">
                <strong>Not available</strong>.
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <div id="session" class="hidden card card-block">
              <h4 class="card-title">Session</h4>
              <p>
                <button id="request-session" type="button" class="btn btn-primary"><i class="fa fa-sign-in"></i> Request</button>
                <button id="leave-session" type="button" class="btn btn-warning"><i class="fa fa-sign-out"></i> Leave</button>
                <button id="stop-session" type="button" class="btn btn-danger"><i class="fa fa-trash"></i> Stop</button>
              </p>
            </div>
          </div>
        </div>
        <div id="loaded" class="hidden card card-block">
          <h4>Currently loaded</h4>
          <dl>
            <dt>Content URL</dt>
            <dd id="current-url" class="url"></dd>
          </dl>
          <p>
            <button id="play-button" class="btn btn-success"><i class="fa fa-play"></i> Play</button>
            <button id="pause-button" class="btn btn-warning"><i class="fa fa-pause"></i> Pause</button>
            <button id="stop-button" class="btn btn-danger"><i class="fa fa-stop"></i> Stop</button>
          </p>
          <div id="progress">
            <div id="progress-text">
              <span class="current-time"></span>
              <span class="duration"></span>
            </div>
            <progress id="progress-bar" class="progress" aria-describedby="progress-text"></progress>
          </div>
        </div>
        <div id="proposed" class="card card-block">
          <h4>Proposed media</h4>
          <button id="load-button" class="btn btn-primary">
            <i class="fa fa-plus"></i>
            Load
          </button>
          <button id="loading-button" class="btn btn-info disabled hidden">
            <i class="fa fa-spinner fa-pulse"></i>
            Loading...
          </button>
          <button id="reload-button" class="btn btn-info hidden">
            <i class="fa fa-refresh"></i>
            Reload
          </button>
          <div class="form-group">
            <label for="new-url">Content URL</label>
            <textarea id="new-url" class="form-control url"></textarea>
          </div>
          <div class="form-group">
            <label for="subtitles">Subtitles URL</label>
            <textarea id="subtitles" class="form-control url"></textarea>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="developer" role="tabpanel">
        <p></p>
        <script>
          $(document).ready(function() {
            $('#developer a[href="#about"]').on('click', function(e) {
              e.preventDefault();
              $('nav a[href="#about"]').tab('show');
            });
          });
        </script>
        <p>
          You can link to this site and automatically fill the proposed media URLs by including a fragment in the link. See <a href="#about">about</a> for reasons why you would want to do this. A fragment is the part after a <code>#</code> in URL. For example <a href="#title=Title,subtitle=Subtitle,poster=http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg,content=http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4" onClick="window.location.reload()"><code style="word-break: break-all">https://chromecast.link#title=Title,subtitle=Subtitle,poster=http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg,content=http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4</code></a>
        </p>
        <p>The valid fragment parameters are:</p>
        <dl>
          <dt>content</dt>
          <dd>URL of content to send to the Chromecast. Must be a supported format like MP4, WebM, Ogg etc.</dd>
          <dt>title</dt>
          <dd>This is the title to show on the loading and pause screens.</dd>
          <dt>poster</dt>
          <dd>A thumbnail image to show that represents the content.</dd>
          <dt>subtitle</dt>
          <dd>Smaller text that appears below the title.</dd>
          <dt>subtitles</dt>
          <dd>URL for subtitles for the content. I think it must be WebVTT format.</dd>
        </dl>
      </div>
      <div class="tab-pane" id="about" role="tabpanel">
        <p></p>
        <p>
          This page makes use of the Chromecast sender API to control Chromecasts on your local network. It provides a web interface rather than requiring you to install a native app on your devices. Links you load are accessed directly by the Chromecast.
        </p>
        <p>
          I made this page because I was annoyed at how invasive Chromecast support can be. It currently requires integrating Chromecast libraries into every application that wants to interoperate. Screen mirroring is a partial solution that doesn't require individual app support, by including the integration at the device-level, but comes with security and privacy issues, and is very inefficient. Data is first streamed to your device, and then streamed on to the Chromecast, requiring double the bandwidth or more than just streaming directly to the Chromecast.
        </p>
        <p>
          This site only serves code to control your Chromecasts. There is no communication of what you are watching required to any server, other than the one your Chromecast accesses to retrieve the content. Links directly to content, from other websites, encode the content in the fragment part of the URL, which is not sent in requests to this site.
        </p>
      </div>
    </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- castlink responsive -->
    <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-5195063250458873"
       data-ad-slot="4804343597"
       data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  </div>
</body>
</html>
