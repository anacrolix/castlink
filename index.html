<html>
<head>
  <title>Cast Link</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.css" />
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-7566778-13', 'auto');
    ga('send', 'pageview');
  </script>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="script.js"></script>
  <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"></script>
  <style>
    .controls > *, .control {
      display: none;
    }
    .load {
      display: initial;
    }
    .current-url {
      overflow-wrap: break-word;
    }
    .duration {
      float: right;
    }
    .hidden {
      display: none;
    }
    .url {
      word-break: break-all;
    }
  </style>
</head>
<body>
  <div class="container">

    <nav class="navbar navbar-inverse bg-inverse navbar-toggleable-md">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="/">Link Caster</a>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="pill" href="#user" role="tab">For Users</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="pill" href="#developer" role="tab">For Developers</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="pill" href="#about" role="tab">About</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="tab-content">
      <div class="tab-pane active" id="user" role="tabpanel">
        <div id="api-not-available" class="alert alert-warning">
          API not initialized.
        </div>
        <div id="api-init-error-alert" class="alert alert-danger hidden" role="alert">
          <strong id="init-error-info"></strong> You may need to use Chrome, or an Android device.
        </div>
        <div id="no-devices-available" class="alert alert-danger">
          No receiver devices available.
        </div>

        <div id="session" class="card">
          <div class="card-block">
            <h5 class="card-title">Session</h5>
            <div id="connected" class="alert alert-success">
              Connected to <strong id="connected-receiver-name"></strong>.
            </div>
            <button id="request-session-button" class="btn btn-primary" type="button"><i class="fa fa-sign-in"></i> Connect</button>
            <button id="leave-session-button" class="btn btn-warning"><i class="fa fa-sign-out"></i> Leave</button>
            <button id="stop-session-button" class="btn btn-danger"><i class="fa fa-trash"></i> Stop</button>
          </div>
        </div>

        <div id="player" class="card card-block">
          <h5 class="card-title">Player</h5>
          <p>
            <button id="play-button" class="btn btn-success" type="button"><i class="fa fa-play"></i> Play</button>
            <button id="pause-button" class="btn btn-warning"><i class="fa fa-pause"></i> Pause</button>
            <button id="stop-button" class="btn btn-danger"><i class="fa fa-stop"></i> Stop</button>
          </p>
          <div id="progress">
            <div id="progress-text">
              <span class="current-time"></span>
              <span class="duration"></span>
            </div>
            <div class="progress">
              <div id="progress-bar" class="progress-bar"></div>
            </div>
          </div>
        </div>

        <div id="media" class="card">
          <div class="card-block">
            <h5 class="card-title">Media</h5>
            <button id="loaded-button" class="btn btn-secondary" data-toggle="modal" data-target="#media-form">
              <i class="fa fa-search"></i>
              Loaded
            </button>
            <button id="proposed-button" class="btn btn-primary" data-toggle="modal" data-target="#media-form">
              <i class="fa fa-pencil"></i>
              Proposed
            </button>
          </div>

          <div class="modal fade" id="media-form" tabindex="-1">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Media spec</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control title"></input>
                  </div>
                  <div class="form-group">
                    <label>Subtitle</label>
                    <input type="text" class="form-control subtitle"></input>
                  </div>
                  <div class="form-group">
                    <label for="new-url">Content URL</label>
                    <textarea class="form-control url content"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="subtitles">Subtitles URL</label>
                    <textarea class="form-control url subtitles"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="subtitles">Poster URL</label>
                    <textarea class="form-control url poster"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary load" data-dismiss="modal">Load</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="developer" role="tabpanel">
        <p></p>
        <script>
          $(document).ready(function() {
            $('#developer a[href="#about"]').on('click', function(e) {
              e.preventDefault();
              $('nav a[href="#about"]').tab('show');
            });
          });
        </script>
        <p>
          You can link to this site and automatically fill the proposed media URLs by including a fragment in the link. See <a href="#about">about</a> for reasons why you would want to do this. A fragment is the part after a <code>#</code> in URL. For example <a href="#title=Title&subtitle=Subtitle&poster=http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg&content=http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4" onClick="window.location.reload()"><code style="word-break: break-all">https://chromecast.link#title=Title&subtitle=Subtitle&poster=http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg&content=http://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4</code></a>
        </p>
        <p>The valid fragment parameters are:</p>
        <dl>
          <dt>content</dt>
          <dd>URL of content to send to the Chromecast. Must be a supported format like MP4, WebM, Ogg etc.</dd>
          <dt>title</dt>
          <dd>This is the title to show on the loading and pause screens.</dd>
          <dt>poster</dt>
          <dd>A thumbnail image to show that represents the content.</dd>
          <dt>subtitle</dt>
          <dd>Smaller text that appears below the title.</dd>
          <dt>subtitles</dt>
          <dd>URL for subtitles for the content. I think it must be WebVTT format.</dd>
        </dl>
      </div>
      <div class="tab-pane" id="about" role="tabpanel">
        <p></p>
        <p>
          This page makes use of the Chromecast sender API to control Chromecasts on your local network. It provides a web interface rather than requiring you to install a native app on your devices. Links you load are accessed directly by the Chromecast.
        </p>
        <p>
          I made this page because I was annoyed at how invasive Chromecast support can be. It currently requires integrating Chromecast libraries into every application that wants to interoperate. Screen mirroring is a partial solution that doesn't require individual app support, by including the integration at the device-level, but comes with security and privacy issues, and is very inefficient. Data is first streamed to your device, and then streamed on to the Chromecast, requiring double the bandwidth or more than just streaming directly to the Chromecast.
        </p>
        <p>
          This site only serves code to control your Chromecasts. There is no communication of what you are watching required to any server, other than the one your Chromecast accesses to retrieve the content. Links directly to content, from other websites, encode the content in the fragment part of the URL, which is not sent in requests to this site.
        </p>
      </div>
    </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- castlink responsive -->
    <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-5195063250458873"
       data-ad-slot="4804343597"
       data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  </div>
</body>
</html>
